{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/57block/my-app/src/app/login/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useUsername } from \"../UsernameContext\";\nimport { useTranslation } from \"react-i18next\"; // 新增\n\nexport default function SignupPage() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [mode, setMode] = useState<\"login\" | \"signup\" | \"\">(\"\");\n  const [data, setData] = useState({\n    username: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n  });\n  const [message, setMessage] = useState(\"\");\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const { t, i18n } = useTranslation();\n  const [lang, setLang] = useState(i18n.language);\n  const router = useRouter();\n  const { setUsername } = useUsername();\n  \n\n  useEffect(() => {\n    setLang(i18n.language);\n  }, [i18n.language]);\n\n  // 语言切换\n\n\n  function changeOpen(m: \"login\" | \"signup\") {\n    if (mode === m) {\n      setIsOpen(!isOpen);\n    } else {\n      setIsOpen(true);\n    }\n    setMode(m);\n    setMessage(\"\");\n  }\n\n  function handleChange(e: React.ChangeEvent<HTMLInputElement>) {\n    setData({ ...data, [e.target.name]: e.target.value });\n  }\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n    setIsSubmitting(true);\n    setMessage(\"\");\n\n    if (mode === \"signup\" && data.password !== data.confirmPassword) {\n      setMessage(t(\"passwordNotMatch\") || \"Passwords do not match\");\n      setIsSubmitting(false);\n      return;\n    }\n\n    try {\n      const res = await fetch(\"/api/auth\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          username: data.username,\n          password: data.password,\n          mode,\n        }),\n      });\n      const json = await res.json();\n      if (!res.ok) throw new Error(json.message);\n\n      setMessage(json.message);\n      if (mode === \"login\") {\n        localStorage.setItem(\"username\", data.username);\n        setUsername(data.username);\n        setTimeout(() => router.push(\"/dashboard\"), 1000);\n      } else {\n        setMode(\"login\");\n        setData({ username: \"\", password: \"\", confirmPassword: \"\" });\n      }\n    } catch (err: unknown) {\n      setMessage(err instanceof Error ? err.message : \"Login failed\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  }\n\n  return (\n    <div className=\"relative flex min-h-screen items-center justify-center p-4 overflow-hidden\">\n      {/* 炫酷多层渐变背景 */}\n      <div\n        aria-hidden=\"true\"\n        className=\"pointer-events-none absolute inset-0 -z-20\"\n      >\n        {/* 主渐变 */}\n        <div className=\"absolute inset-0 bg-gradient-to-br from-sky-200 via-indigo-200 to-pink-200 dark:from-gray-900 dark:via-slate-900 dark:to-slate-800 transition-colors duration-500\" />\n        {/* 彩色模糊光斑 */}\n        <div className=\"absolute left-1/4 top-1/4 w-72 h-72 bg-pink-400 opacity-30 rounded-full blur-3xl dark:bg-pink-700\" />\n        <div className=\"absolute right-1/4 bottom-1/4 w-80 h-80 bg-sky-400 opacity-30 rounded-full blur-3xl dark:bg-sky-700\" />\n        <div className=\"absolute left-1/2 top-2/3 w-60 h-60 bg-indigo-400 opacity-20 rounded-full blur-2xl dark:bg-indigo-700\" />\n        <div className=\"absolute animate-pulse left-1/3 top-1/2 w-40 h-40 bg-yellow-300 opacity-20 rounded-full blur-2xl dark:bg-yellow-700\" /> \n      </div>\n      <div\n        aria-hidden=\"true\"\n        className=\"pointer-events-none absolute -top-16 -left-16 h-64 w-64 rounded-full border-8 border-sky-400/20 dark:border-sky-600/20\"\n      />\n\n      {/* 标题和语言切换 */}\n      <div className=\"absolute top-8 left-1/2 -translate-x-1/2 flex items-center gap-4\">\n        <h1 className=\"text-2xl font-bold text-gray-800 dark:text-gray-100 sm:text-3xl\">\n          {t(\"myDashboard\")}\n        </h1>\n      </div>\n      {/* 右上角透明语言切换 */}\n      <div className=\"absolute top-4 right-4 z-20\">\n        <select\n          value={lang}\n          onChange={(e) => {\n            const lng = e.target.value;\n            i18n.changeLanguage(lng);\n            localStorage.setItem(\"i18nextLng\", lng); // 保持持久化\n          }}\n          className=\"\n            bg-white/50  backdrop-blur-sm\n            border border-white/20\n            rounded px-2 py-1 text-xs\n            text-black\n            dark:bg-gray-900/20 dark:border-white/30\n            dark:text-white\n            transition-colors duration-200\n            focus:outline-none focus:ring-2 focus:ring-blue-400\n          \"\n        >\n          <option value=\"en\">English</option>\n          <option value=\"zh\">简体中文</option>\n        </select>\n      </div>\n      {/* 原卡片 */}\n      <div className=\"relative z-10 w-full max-w-md rounded-lg bg-white p-6 shadow-xl dark:bg-gray-800\">\n        <div className=\"flex space-x-2\">\n          <button\n            onClick={() => changeOpen(\"login\")}\n            className={`flex-1 rounded py-2 text-white ${\n              mode === \"login\" && isOpen ? \"bg-gray-500\" : \"bg-blue-500\"\n            }`}\n          >\n            {t(\"login\")}\n          </button>\n          <button\n            onClick={() => changeOpen(\"signup\")}\n            className={`flex-1 rounded py-2 text-white ${\n              mode === \"signup\" && isOpen ? \"bg-gray-500\" : \"bg-blue-500\"\n            }`}\n          >\n            {t(\"signup\")}\n          </button>\n        </div>\n\n        <div\n          className={`overflow-hidden transition-all duration-300 ease-in-out ${\n            isOpen ? \"max-h-[500px] opacity-100 mt-4\" : \"max-h-0 opacity-0\"\n          }`}\n        >\n          <form onSubmit={handleSubmit} className=\"mt-4\">\n            {/* Username */}\n            <div className=\"mb-4\">\n              <label className=\"mb-2 block font-medium text-gray-700 dark:text-gray-200\">\n                {t(\"username\")}:\n                <input\n                  type=\"text\"\n                  name=\"username\"\n                  value={data.username}\n                  onChange={handleChange}\n                  className=\"mt-1 block w-full rounded border border-gray-300 p-2 focus:border-transparent focus:ring-2 focus:ring-blue-500\"\n                  required\n                />\n              </label>\n            </div>\n\n            {/* Password */}\n            <div className=\"mb-4\">\n              <label className=\"mb-2 block font-medium text-gray-700 dark:text-gray-200\">\n                {t(\"password\")}:\n                <input\n                  type=\"password\"\n                  name=\"password\"\n                  value={data.password}\n                  onChange={handleChange}\n                  className=\"mt-1 block w-full rounded border border-gray-300 p-2 focus:border-transparent focus:ring-2 focus:ring-blue-500\"\n                  required\n                />\n              </label>\n            </div>\n\n            {/* Confirm Password */}\n            <div\n              className={`transition-all duration-300 ease-in-out ${\n                mode === \"signup\"\n                  ? \"max-h-40 opacity-100\"\n                  : \"max-h-0 opacity-0\"\n              } overflow-hidden mb-4`}\n            >\n              <label className=\"mb-1 block font-medium text-gray-700 dark:text-gray-200\">\n                {t(\"confirmPassword\")}:\n              </label>\n              <input\n                type=\"password\"\n                name=\"confirmPassword\"\n                value={data.confirmPassword}\n                onChange={handleChange}\n                className=\"w-full rounded border border-gray-300 p-2 focus:ring-2 focus:ring-blue-500\"\n                required={mode === \"signup\"}\n                disabled={mode !== \"signup\"}\n              />\n            </div>\n\n            {/* Submit */}\n            <button\n              type=\"submit\"\n              disabled={isSubmitting}\n              className={`w-full rounded px-4 py-2 text-white transition-colors ${\n                isSubmitting\n                  ? \"cursor-not-allowed bg-gray-400\"\n                  : \"bg-blue-500 hover:bg-blue-600\"\n              }`}\n            >\n              {isSubmitting\n                ? t(\"processing\")\n                : mode === \"login\"\n                ? t(\"login\")\n                : t(\"createAccount\")}\n            </button>\n\n            {message && (\n              <p\n                className={`mt-3 rounded p-2 text-center ${\n                  message.includes(\"success\") ||\n                  message.includes(\"Registered\")\n                    ? \"bg-green-100 text-green-700\"\n                    : \"bg-red-100 text-red-700\"\n                }`}\n              >\n                {message}\n              </p>\n            )}\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 401, "column": 0}, "map": {"version":3,"sources":["file:///Users/57block/my-app/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}