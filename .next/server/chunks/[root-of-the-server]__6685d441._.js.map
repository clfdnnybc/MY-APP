{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file:///Users/57block/my-app/src/app/api/account/username/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport mysql from \"mysql2/promise\";\n\nconst pool = mysql.createPool({\n  host: \"localhost\",\n  user: \"root\",\n  password: \"\",\n  database: \"userinfo\",\n  waitForConnections: true,\n  connectionLimit: 10,\n});\n\nexport async function PUT(req: NextRequest) {\n  const { username, storedUsername } = await req.json(); // 接收 storedUsername\n  const [existingUserRows] = await pool.query(\"SELECT * FROM users WHERE username = ?\", [username]);\n  const existingUser = (existingUserRows as any[])[0];\n\n  if (existingUser && existingUser.username !== storedUsername)\n    return NextResponse.json({ message: \"Username already exists\" }, { status: 409 });\n\n  try {\n    await pool.query(\"UPDATE users SET username = ? WHERE username = ?\", [username, storedUsername]);\n    return NextResponse.json({ message: \"Username updated successfully\" });\n  } catch (error) {\n    return NextResponse.json({ message: \"Failed to update username\" }, { status: 500 });\n  }\n}"],"names":[],"mappings":";;;AAAA;AACA;;;AAEA,MAAM,OAAO,mIAAA,CAAA,UAAK,CAAC,UAAU,CAAC;IAC5B,MAAM;IACN,MAAM;IACN,UAAU;IACV,UAAU;IACV,oBAAoB;IACpB,iBAAiB;AACnB;AAEO,eAAe,IAAI,GAAgB;IACxC,MAAM,EAAE,QAAQ,EAAE,cAAc,EAAE,GAAG,MAAM,IAAI,IAAI,IAAI,oBAAoB;IAC3E,MAAM,CAAC,iBAAiB,GAAG,MAAM,KAAK,KAAK,CAAC,0CAA0C;QAAC;KAAS;IAChG,MAAM,eAAe,AAAC,gBAA0B,CAAC,EAAE;IAEnD,IAAI,gBAAgB,aAAa,QAAQ,KAAK,gBAC5C,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,SAAS;IAA0B,GAAG;QAAE,QAAQ;IAAI;IAEjF,IAAI;QACF,MAAM,KAAK,KAAK,CAAC,oDAAoD;YAAC;YAAU;SAAe;QAC/F,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAgC;IACtE,EAAE,OAAO,OAAO;QACd,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA4B,GAAG;YAAE,QAAQ;QAAI;IACnF;AACF","debugId":null}}]
}