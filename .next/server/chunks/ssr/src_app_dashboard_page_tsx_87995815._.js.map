{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/57block/my-app/src/app/dashboard/page.tsx"],"sourcesContent":["'use client';\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { useTranslation } from 'react-i18next';\n\ninterface NewsItem {\n  id: number;\n  title: string;\n  content: string;\n  date: string;\n  published: boolean;\n}\n\nexport default function DashboardHome() {\n  const { t } = useTranslation();\n  const [news, setNews] = useState<NewsItem[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [fetchError, setFetchError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchNews = async () => {\n      try {\n        const response = await fetch('/api/news');\n        \n        if (!response.ok) {\n          throw new Error('Network response was not ok');\n        }\n        // 确保数据是数组\n        const json = await response.json();\n        if (!Array.isArray(json.rows)) throw new Error('Invalid data format');\n        setNews(json.rows);\n        setFetchError(null);\n      } catch (error) {\n        console.error('Fetch error:', error);\n        setFetchError(error instanceof Error ? error.message : 'Unknown error occurred');\n        setNews([]); // 设置为空数组以显示空状态\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchNews();\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"p-6\">\n        {/* 加载状态占位符 */}\n        <div className=\"animate-pulse\">\n          <div className=\"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-6\"></div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {[...Array(3)].map((_, i) => (\n              <div key={i} className=\"bg-white dark:bg-gray-800 rounded-xl shadow-md p-4\">\n                <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-3\"></div>\n                <div className=\"h-3 bg-gray-200 dark:bg-gray-700 rounded w-full mb-2\"></div>\n                <div className=\"h-3 bg-gray-200 dark:bg-gray-700 rounded w-5/6 mb-4\"></div>\n                <div className=\"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/3\"></div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // 错误状态\n  if (fetchError) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"bg-red-100 dark:bg-red-900/20 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded relative mb-6\">\n          {t('fetchError')}: {fetchError}\n        </div>\n        <button \n          onClick={() => window.location.reload()}\n          className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg\"\n        >\n          {t('retry')}\n        </button>\n      </div>\n    );\n  }\n\n  // 空状态\n  if (news.length === 0) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-md p-8 text-center\">\n          <div className=\"text-5xl mb-4\">📰</div>\n          <h3 className=\"text-lg font-medium text-gray-800 dark:text-gray-200 mb-2\">\n            {t('noNewsTitle')}\n          </h3>\n          <p className=\"text-gray-600 dark:text-gray-400 mb-4\">\n            {t('noNewsDescription')}\n          </p>\n          <Link href=\"/dashboard/news/edit\">\n            <button className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg\">\n              {t('createFirstNews')}\n            </button>\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  // 正常状态\n  return (\n    <div className=\"p-6\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-800 dark:text-gray-200\">\n          {t('latestNews')}\n        </h1>\n        <Link href=\"/dashboard/news/edit\">\n          <button className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center\">\n            <span className=\"icon-[mynaui--plus] mr-2 w-5 h-5\"></span>\n            {t('addNews')}\n          </button>\n        </Link>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {news.map(item => (\n          <div key={item.id} className=\"bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow\">\n            {/* 新闻卡片内容 */}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAAA;AAHA;;;;;AAae,SAAS;IACtB,MAAM,EAAE,CAAC,EAAE,GAAG,CAAA,GAAA,gKAAA,CAAA,iBAAc,AAAD;IAC3B,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAc,EAAE;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAE5D,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM;gBAE7B,IAAI,CAAC,SAAS,EAAE,EAAE;oBAChB,MAAM,IAAI,MAAM;gBAClB;gBACA,UAAU;gBACV,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,IAAI,CAAC,MAAM,OAAO,CAAC,KAAK,IAAI,GAAG,MAAM,IAAI,MAAM;gBAC/C,QAAQ,KAAK,IAAI;gBACjB,cAAc;YAChB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,gBAAgB;gBAC9B,cAAc,iBAAiB,QAAQ,MAAM,OAAO,GAAG;gBACvD,QAAQ,EAAE,GAAG,eAAe;YAC9B,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG,EAAE;IAEL,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBAEb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;kCACZ;+BAAI,MAAM;yBAAG,CAAC,GAAG,CAAC,CAAC,GAAG,kBACrB,8OAAC;gCAAY,WAAU;;kDACrB,8OAAC;wCAAI,WAAU;;;;;;kDACf,8OAAC;wCAAI,WAAU;;;;;;kDACf,8OAAC;wCAAI,WAAU;;;;;;kDACf,8OAAC;wCAAI,WAAU;;;;;;;+BAJP;;;;;;;;;;;;;;;;;;;;;IAWtB;IAEA,OAAO;IACP,IAAI,YAAY;QACd,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;wBACZ,EAAE;wBAAc;wBAAG;;;;;;;8BAEtB,8OAAC;oBACC,SAAS,IAAM,OAAO,QAAQ,CAAC,MAAM;oBACrC,WAAU;8BAET,EAAE;;;;;;;;;;;;IAIX;IAEA,MAAM;IACN,IAAI,KAAK,MAAM,KAAK,GAAG;QACrB,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCAAgB;;;;;;kCAC/B,8OAAC;wBAAG,WAAU;kCACX,EAAE;;;;;;kCAEL,8OAAC;wBAAE,WAAU;kCACV,EAAE;;;;;;kCAEL,8OAAC,4JAAA,CAAA,UAAI;wBAAC,MAAK;kCACT,cAAA,8OAAC;4BAAO,WAAU;sCACf,EAAE;;;;;;;;;;;;;;;;;;;;;;IAMf;IAEA,OAAO;IACP,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCACX,EAAE;;;;;;kCAEL,8OAAC,4JAAA,CAAA,UAAI;wBAAC,MAAK;kCACT,cAAA,8OAAC;4BAAO,WAAU;;8CAChB,8OAAC;oCAAK,WAAU;;;;;;gCACf,EAAE;;;;;;;;;;;;;;;;;;0BAKT,8OAAC;gBAAI,WAAU;0BACZ,KAAK,GAAG,CAAC,CAAA,qBACR,8OAAC;wBAAkB,WAAU;uBAAnB,KAAK,EAAE;;;;;;;;;;;;;;;;AAO3B","debugId":null}}]
}