{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/57block/my-app/src/app/dashboard/layout.tsx"],"sourcesContent":["\"use client\";\nimport { ReactNode, useState, useEffect } from \"react\";\nimport { useRouter, usePathname } from \"next/navigation\";\nimport { useUsername } from \"../UsernameContext\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface Props {\n  children: ReactNode;\n}\n\nexport default function DashboardLayout({ children }: Props) {\n  const [showLogout, setShowLogout] = useState(false);\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [logoutPos, setLogoutPos] = useState<{ x: number; y: number } | null>(null);\n  const router = useRouter();\n  const { t, i18n } = useTranslation();\n  const [mounted, setMounted] = useState(false);\n  const pathname = usePathname();\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n  const { username } = useUsername();\n  const handleLogout = () => {\n    setShowLogout(false);\n    setTimeout(() => router.push(\"/login\"), 500);\n  };\n\n  const handleLogoutClick = (e: React.MouseEvent) => {\n    setLogoutPos({ x: e.clientX, y: e.clientY });\n    setShowLogout(true);\n    \n  };\n  \n\n  type MenuItem = \n    | { label: string; href: string; icon: string; action?: undefined }\n    | { label: string; icon: string; action: (e: React.MouseEvent) => void; href?: undefined };\n\n  if (!mounted) return <div />;\n\n  const menuItems: MenuItem[] = [\n    { label: t(\"dashboard\"), href: \"/dashboard\", icon: \"icon-[mynaui--home]\" },\n    { label: t(\"account\"), href: \"/dashboard/account\", icon: \"icon-[mynaui--user]\" },\n    { label: t(\"settings\"), href: \"/dashboard/settings\", icon: \"icon-[mynaui--cog-four]\" },\n    { label: t(\"logout\"), action: handleLogoutClick, icon: \"icon-[mynaui--logout]\" },\n  ];\n\n  return (\n    <div className=\"flex h-screen\">\n      <aside\n        className={`flex flex-col bg-white dark:bg-gray-800 transition-all duration-300 ${\n          sidebarOpen ? \"w-56\" : \"w-0\"\n        }`}\n      >\n        <div className=\"p-4 space-y-2\">\n          {menuItems.map((item) => (\n            <button\n              key={item.label}\n              disabled={!sidebarOpen}\n              onClick={\n                item.action\n                  ? (e) => item.action(e)\n                  : () => item.href && router.push(item.href)\n              }\n              title={item.label}\n              className={`\n                w-full flex items-center px-3 py-2 rounded\n                transition-opacity duration-200\n                ${sidebarOpen ? 'opacity-100 delay-300' : 'opacity-0 delay-0'}\n                ${item.label === t('logout')\n                  ? 'bg-red-500 text-white dark:bg-red-600 hover:bg-red-600 dark:hover:bg-red-700'\n                  : 'text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-900'\n                }\n              `}\n            >\n              <span\n                className={`\n                  w-5 h-5 ${item.icon} dark:color-white\n                  transition-opacity duration-200\n                  ${sidebarOpen ? 'opacity-100 delay-300' : 'opacity-0 delay-0'}\n                `}\n              />\n              <span\n                className={`\n                  ml-3 text-sm\n                  transition-opacity duration-200\n                  ${sidebarOpen ? 'opacity-100 delay-300' : 'opacity-0 delay-0'}\n                `}\n              >\n                {item.label}\n              </span>\n            </button>\n          ))}\n        </div>\n      </aside>\n\n      <div className=\"flex-1 flex flex-col\">\n        <header className=\"bg-blue-100 dark:bg-gray-700 p-6 h-16 shadow-md flex items-center\">\n          <button\n            onClick={() => setSidebarOpen(!sidebarOpen)}\n            className=\"mr-4 p-2 rounded hover:bg-blue-200 dark:hover:bg-gray-600\"\n          >\n            <span className={`w-7 h-7 icon-[mynaui--menu] dark:color-white`} />\n          </button>\n\n          <div className=\"ml-auto relative group\">\n            <button className=\"flex items-center space-x-2 bg-white dark:bg-black p-2 rounded-lg\">\n              <span className=\"text-sm text-gray-600 dark:text-gray-200\">{username}</span>\n              <img src=\"/avatar.ico\" alt=\"avatar\" className=\"w-8 h-8 rounded-full object-cover\" />\n            </button>\n\n            <div className=\"absolute top-full left-0 right-0 h-2\" />\n\n            <div\n              className=\"absolute right-0 top-full mt-2 w-56 bg-white dark:bg-gray-800 rounded-lg shadow-xl z-50\n                         opacity-0 scale-95 origin-top-right\n                         group-hover:opacity-100 group-hover:scale-100\n                         transition-all duration-200 ease-out\n                         p-4 space-y-3 pointer-events-none group-hover:pointer-events-auto\"\n            >\n              <div className=\"flex items-center space-x-3\">\n                <img src=\"/avatar.ico\" alt=\"avatar\" className=\"w-10 h-10 rounded-full object-cover\" />\n                <span className=\"font-medium text-gray-800 dark:text-gray-200\">{username}</span>\n              </div>\n\n              {menuItems.map((item) => (\n                <button\n                  key={item.label}\n                  onClick={\n                    item.action\n                      ? (e) => item.action(e)\n                      : () => item.href && router.push(item.href)\n                  }\n                  className={`w-full flex items-center px-3 py-2 rounded\n                    ${item.label === t('logout')\n                      ? 'bg-red-500 text-white dark:bg-red-600 hover:bg-red-600 dark:hover:bg-red-700'\n                      : 'text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-900'\n                    }`}\n                >\n                  <span className={`w-4 h-4 mr-2 ${item.icon} dark:color-white`} />\n                  {item.label}\n                </button>\n              ))}\n            </div>\n          </div>\n        </header>\n\n        <main className=\"flex-1 overflow-y-auto p-6\">\n          <div key={pathname} className=\"page-transition\">\n            {children}\n          </div>\n        </main>\n\n\n        {showLogout && (\n        <div className=\"fixed inset-0 bg-black/40 z-50\">\n          <div\n            className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-80 fly-center\"\n            style={{\n              // 只需要传递鼠标位置变量\n              [\"--x\" as any]: `${logoutPos?.x || 0}px`,\n              [\"--y\" as any]: `${logoutPos?.y || 0}px`,\n            }}\n          >\n            <h2 className=\"text-lg font-semibold mb-4\">{t(\"confirmLogout\")}</h2>\n            <p className=\"text-sm text-gray-600 mb-6\">{t(\"confirmTips\")}</p>\n            <div className=\"flex justify-end space-x-3\">\n              <button onClick={() => setShowLogout(false)} className=\"px-4 py-2 rounded border border-gray-300 hover:bg-gray-100 dark:hover:bg-gray-900\">\n                {t(\"cancel\")}\n              </button>\n              <button onClick={handleLogout} className=\"px-4 py-2 rounded bg-red-600 text-white hover:bg-red-700\">\n                {t(\"confirm\")}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}