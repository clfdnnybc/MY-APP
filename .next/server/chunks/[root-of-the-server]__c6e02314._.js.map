{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file:///Users/57block/my-app/src/app/api/account/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport mysql from \"mysql2/promise\";\nimport bcrypt from \"bcryptjs\";\n\nconst pool = mysql.createPool({\n  host: \"localhost\",\n  user: \"root\",\n  password: \"\",\n  database: \"userinfo\",\n  waitForConnections: true,\n  connectionLimit: 10,\n});\n\nexport async function POST(req: NextRequest) {\n  const { username, password, mode } = await req.json();\n  const [rows] = await pool.query(\"SELECT * FROM users WHERE username = ?\", [username]);\n  const user = (rows as any[])[0];\n\n  if (mode === \"signup\") {\n    if (user) return NextResponse.json({ message: \"User exists\" }, { status: 409 });\n    await pool.query(\"INSERT INTO users (username, password) VALUES (?, ?)\", [username, await bcrypt.hash(password, 12)]);\n    return NextResponse.json({ message: \"Registered\" });\n  }\n\n  if (!user || !(await bcrypt.compare(password, user.password)))\n    return NextResponse.json({ message: \"Invalid credentials\" }, { status: 401 });\n  return NextResponse.json({ message: \"Login success\" });\n}\n\nexport async function PUT(req: NextRequest) {\n  const { username, oldPassword, newPassword } = await req.json();\n  const [rows] = await pool.query(\"SELECT * FROM users WHERE username = ?\", [username]);\n  const user = (rows as any[])[0];\n\n  if (!user || !(await bcrypt.compare(oldPassword, user.password)))\n    return NextResponse.json({ message: \"Invalid credentials\" }, { status: 401 });\n\n  try {\n    const hashedPassword = await bcrypt.hash(newPassword, 12);\n    await pool.query(\"UPDATE users SET password = ? WHERE username = ?\", [hashedPassword, username]);\n    return NextResponse.json({ message: \"Password updated successfully\" });\n  } catch (error) {\n    return NextResponse.json({ message: \"Failed to update password\" }, { status: 500 });\n  }\n}\n\nexport async function GET(req: NextRequest) {\n  const username = req.nextUrl.searchParams.get(\"username\") || \"\";\n  const [rows] = await pool.query(\"SELECT * FROM users WHERE username = ?\", [username]);\n  const user = (rows as any[])[0];\n\n  if (!user) return NextResponse.json({ message: \"User not found\" }, { status: 404 });\n\n  return NextResponse.json(user);\n}"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;AAEA,MAAM,OAAO,mIAAA,CAAA,UAAK,CAAC,UAAU,CAAC;IAC5B,MAAM;IACN,MAAM;IACN,UAAU;IACV,UAAU;IACV,oBAAoB;IACpB,iBAAiB;AACnB;AAEO,eAAe,KAAK,GAAgB;IACzC,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI;IACnD,MAAM,CAAC,KAAK,GAAG,MAAM,KAAK,KAAK,CAAC,0CAA0C;QAAC;KAAS;IACpF,MAAM,OAAO,AAAC,IAAc,CAAC,EAAE;IAE/B,IAAI,SAAS,UAAU;QACrB,IAAI,MAAM,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAc,GAAG;YAAE,QAAQ;QAAI;QAC7E,MAAM,KAAK,KAAK,CAAC,wDAAwD;YAAC;YAAU,MAAM,mIAAA,CAAA,UAAM,CAAC,IAAI,CAAC,UAAU;SAAI;QACpH,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAa;IACnD;IAEA,IAAI,CAAC,QAAQ,CAAE,MAAM,mIAAA,CAAA,UAAM,CAAC,OAAO,CAAC,UAAU,KAAK,QAAQ,GACzD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,SAAS;IAAsB,GAAG;QAAE,QAAQ;IAAI;IAC7E,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,SAAS;IAAgB;AACtD;AAEO,eAAe,IAAI,GAAgB;IACxC,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,WAAW,EAAE,GAAG,MAAM,IAAI,IAAI;IAC7D,MAAM,CAAC,KAAK,GAAG,MAAM,KAAK,KAAK,CAAC,0CAA0C;QAAC;KAAS;IACpF,MAAM,OAAO,AAAC,IAAc,CAAC,EAAE;IAE/B,IAAI,CAAC,QAAQ,CAAE,MAAM,mIAAA,CAAA,UAAM,CAAC,OAAO,CAAC,aAAa,KAAK,QAAQ,GAC5D,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,SAAS;IAAsB,GAAG;QAAE,QAAQ;IAAI;IAE7E,IAAI;QACF,MAAM,iBAAiB,MAAM,mIAAA,CAAA,UAAM,CAAC,IAAI,CAAC,aAAa;QACtD,MAAM,KAAK,KAAK,CAAC,oDAAoD;YAAC;YAAgB;SAAS;QAC/F,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAgC;IACtE,EAAE,OAAO,OAAO;QACd,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA4B,GAAG;YAAE,QAAQ;QAAI;IACnF;AACF;AAEO,eAAe,IAAI,GAAgB;IACxC,MAAM,WAAW,IAAI,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,eAAe;IAC7D,MAAM,CAAC,KAAK,GAAG,MAAM,KAAK,KAAK,CAAC,0CAA0C;QAAC;KAAS;IACpF,MAAM,OAAO,AAAC,IAAc,CAAC,EAAE;IAE/B,IAAI,CAAC,MAAM,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,SAAS;IAAiB,GAAG;QAAE,QAAQ;IAAI;IAEjF,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;AAC3B","debugId":null}}]
}